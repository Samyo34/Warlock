<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title> Test map </title>
</head>

<body>
    <canvas id="canvas" width="800" height="560"></canvas>
    <script src="/socket.io/socket.io.js"></script>
    <script src="./client/js/jquery.js"></script>
    <script>
        var clicY=0;
        var clicX=0;
        var id = 0;
       var socket = io.connect('http://176.189.11.21:2000');

       var ctx = document.getElementById("canvas").getContext("2d");
       ctx.font='30px Arial';

        socket.on('serverMsg',function(data){
            console.log(data.msg);
            id=data.id;
        });

        socket.on('updateServer',function(data){

            for(var i in data)
            {
                ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);

                ctx.save();
                ctx.translate(data[i].x,data[i].y);
                ctx.rotate(data[i].rotation*Math.PI/180);
                console.log(data[i].x+':'+data[i].y+ ' '+ data[i].rotation);
                ctx.fillRect(-10 ,-10, 20, 20);
                ctx.fillStyle = 'green';
                ctx.lineWidth = 5;
                ctx.restore();
                //ctx.strokeStyle = '#003300';
               // ctx.stroke();
            }
        });

        //jQuery
        $('#canvas').on('mousedown',function(e){
            clicX = e.pageX - $(this).offset().left;
            clicY = e.pageY - $(this).offset().top;
            socket.emit('mouseClick',{
                x:clicX,
                y:clicY,
                id:id,
            });

        })
    </script>

   <!--
    <script src="../jquery.js"></script>
    <script src="../Player.js"></script>
    <script src="../Room.js"></script>
    <script src="../Display.js"></script>
    -->
</body>
</html>