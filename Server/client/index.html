<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title> Test map </title>
</head>

<body>
    <canvas id="canvas" width="800" height="560"></canvas>
    <script src="/socket.io/socket.io.js"></script>
    <script src="./client/js/jquery.js"></script>
    <script>
        var clicY=0;
        var clicX=0;
        var id = 0;
       var socket = io.connect('http://localhost:2000');

       var ctx = document.getElementById("canvas").getContext("2d");
       ctx.font='30px Arial';

        socket.on('serverMsg',function(data){
            console.log(data.msg);
            id=data.id;
        });

        socket.on('updateServer',function(data){
            ctx.clearRect(0,0,800,560);
            for(var i in data)
            {
                ctx.beginPath();
                ctx.arc(data[i].x, data[i].y, 10, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'green';
                ctx.fill();
                ctx.lineWidth = 5;
                ctx.strokeStyle = '#003300';
                ctx.stroke();
            }
        });

        //jQuery
        $('#canvas').on('mousedown',function(e){
            clicX = e.pageX - $(this).offset().left;
            clicY = e.pageY - $(this).offset().top;
            console.log(clicX + ' '+clicY);
            socket.emit('mouseClick',{
                x:clicX,
                y:clicY,
                id:id,
            });

        })
    </script>

   <!--
    <script src="../jquery.js"></script>
    <script src="../Player.js"></script>
    <script src="../Room.js"></script>
    <script src="../Display.js"></script>
    -->
</body>
</html>